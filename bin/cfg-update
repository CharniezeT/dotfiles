#!/bin/bash

cd

# Update the settings for this repo
echo -e "[paths]\ndefault = http://hg.davejamesmiller.com/linux-config\ndefault-push = ssh://hg.davejamesmiller.com//home/sites/hg.davejamesmiller.com/repos/linux-config\n\n[hooks]\nupdate.cfg-update = bin/cfg-update" > .hg/hgrc

# Create local Mercurial settings file, and chmod to ensure any passwords are protected
if [ ! -e .hgrc_local ]; then
    touch .hgrc_local
    chmod 600 .hgrc_local
fi

# Create local MySQL settings file, and chmod to ensure any passwords are protected
if [ ! -e .my_local.cnf ]; then
    touch .my_local.cnf
    chmod 600 .my_local.cnf
fi
